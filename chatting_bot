const scriptName = "test";
/**
 * (string) room
 * (string) sender
 * (boolean) isGroupChat
 * (void) replier.reply(message)
 * (boolean) replier.reply(room, message, hideErrorToast = false) // ì „ì†¡ ì„±ê³µì‹œ true, ì‹¤íŒ¨ì‹œ false ë°˜í™˜
 * (string) imageDB.getProfileBase64()
 * (string) packageName
 */
 
 function getWeather(replier, msg) {
  // íŠ¹ì • ì›¹ í˜ì´ì§€ë¡œë¶€í„° HTMLì˜ íŠ¹ì • ì†ŒìŠ¤ì½”ë“œ(id = wob_wc) ê°€ì ¸ì˜¤ê¸°
  var weather = org.jsoup.Jsoup.connect("https://www.google.com/search?q=" + msg.replace(" ", "+")).get().select("#wob_wc");;

  // ê°€ì ¸ì˜¨ ë°ì´í„°ê°€ ì—†ê±°ë‚˜ ê³µë°±ì¼ ê²½ìš° ì¢…ë£Œ
  if (weather == undefined || weather == "") return ;

  // ë‚ ì”¨ ë°ì´í„° íŒŒì‹± 
  var data = weather.select("#wob_loc").text() + " ë‚ ì”¨ â›…";
  data = data.concat("\n" + weather.select("#wob_dts").text() + "\n");
  data = data.concat("\n" + weather.select("#wob_dc").text() + " ");
  data = data.concat("\n" + weather.select("#wob_tm").text() + "â„ƒ");

  var wob_d = weather.select("#wob_d").select(".wob-dtl");
  data = data.concat("\nê°•ìˆ˜í™•ë¥  : " + wob_d.select("#wob_pp").text());
  data = data.concat("\nìŠµë„ : " + wob_d.select("#wob_hm").text());
  data = data.concat("\ní’ì† : " + wob_d.select("#wob_ws").text());
  data = data.concat("\n\n=-=-=-=-=-=-=-=-=-=-=-=-=");

  var wob_df = weather.select(".wob_df");
  for (var i = 0; i < wob_df.size(); i++) {
    var t = wob_df.get(i);
    data = data.concat("\n");
    data = data.concat(t.select("div>div").get(0).text() + " : ");
    data = data.concat(t.select("div>img").attr("alt") + " ");
    data = data.concat("(" + t.select("div>div>span").get(0).text());
    data = data.concat(" ~ " + t.select("div>div>span").get(2).text() + "â„ƒ)");
  }
  replier.reply(data);
}

var DFLT_ADMIN = [{ name: "í•«ì œ" }, { name: "í•«ì œì´" }];

var RoomList = [];

function checkRoom(room) {
  var new_flag = 1;
  for (var idx in RoomList) {
    if (RoomList[idx] == room) new_flag = 0;
  }
  if (new_flag) RoomList.push(room);
}
function showRooms() {
  var rtn_msg = "[ë°© ë¦¬ìŠ¤íŠ¸]";
  for (var idx in RoomList) rtn_msg = rtn_msg.concat("\n " + RoomList[idx]);
  return rtn_msg;
}

function isNull(value) {
  return typeof value == "undefined" || value == null || value == "" ? true : false;
}

function getAdminList() {
  var database = DataBase.getDataBase("AdminList.json");
  if (isNull(database) || database == "[]") database = DataBase.setDataBase("AdminList.json", JSON.stringify(DFLT_ADMIN));
  return database;
}

// ê´€ë¦¬ì ì¡°íšŒ
function getAdminText() {
  var AdminList = JSON.parse(getAdminList());
  var text = "";
  for (var idx in AdminList) text = text.concat(AdminList[idx]["name"] + "\n");
  return text.slice(0, -1);
}

// ê´€ë¦¬ì ì¶”ê°€
function addAdmin(name) {
  var AdminList = JSON.parse(getAdminList());
  for (var idx in AdminList) {
    if (AdminList[idx]["name"] == name) return -1; // already exist
  }
  AdminList.push({ name: name });
  DataBase.setDataBase("AdminList.json", JSON.stringify(AdminList));
  return 0; // success
}

// ê´€ë¦¬ì ì œê±°
function delAdmin(name) {
  var AdminList = JSON.parse(getAdminList());
  for (var idx in AdminList) {
    if (AdminList[idx]["name"] == name) {
      AdminList.splice(idx, 1);
      DataBase.setDataBase("AdminList.json", JSON.stringify(AdminList));
      return 0; // success
    }
  }
  return -1; // not exist
}

// ê´€ë¦¬ì í™•ì¸
function isAdmin(name) {
  var AdminList = JSON.parse(getAdminList());
  for (var idx in AdminList) {
    if (AdminList[idx]["name"] == name) return 1; // is admin
  }
  return 0; // isn't admmin
}

function botStatus() {
  var stat_msg = "";
  var scripts = Api.getScriptNames();
  for (var idx in scripts) {
    stat_msg = stat_msg.concat("[" + scripts[idx] + " ë´‡ ìƒíƒœ]");
    stat_msg = stat_msg.concat("\n ì „ì› ìƒíƒœ : " + Api.isOn(scripts[idx]));
    stat_msg = stat_msg.concat("\n ì»´íŒŒì¼ ì™„ë£Œ : " + Api.isCompiled(scripts[idx]));
    stat_msg = stat_msg.concat("\n ì»´íŒŒì¼ ì§„í–‰ì¤‘ : " + Api.isCompiling(scripts[idx]));
    stat_msg = stat_msg.concat("\n\n");
  }
  return stat_msg.slice(0, -2);
}

function deviceStatus() {
  var stat_msg = "[ë””ë°”ì´ìŠ¤ ìƒíƒœ]";
  stat_msg = stat_msg.concat("\nì•ˆë“œë¡œì´ë“œ OSë¹Œë“œ : " + Device.getBuild());
  stat_msg = stat_msg.concat("\nì•ˆë“œë¡œì´ë“œ ë²„ì „ì½”ë“œ : " + Device.getAndroidVersionCode());
  stat_msg = stat_msg.concat("\nì•ˆë“œë¡œì´ë“œ ë²„ì „ì´ë¦„ : " + Device.getAndroidVersionCode());
  stat_msg = stat_msg.concat("\níœ´ëŒ€í° ë¸Œëœë“œëª… : " + Device.getPhoneBrand());
  stat_msg = stat_msg.concat("\níœ´ëŒ€í° ëª¨ë¸ëª… : " + Device.getPhoneModel());
  stat_msg = stat_msg.concat("\n");
  stat_msg = stat_msg.concat("\nì¶©ì „ ì—¬ë¶€ : " + Device.isCharging());
  stat_msg = stat_msg.concat("\nì¶©ì „ê¸° íƒ€ì… : " + Device.getPlugType());
  stat_msg = stat_msg.concat("\në°°í„°ë¦¬ ì”ëŸ‰ : " + Device.getBatteryLevel() + "%");
  stat_msg = stat_msg.concat("\në°°í„°ë¦¬ ì˜¨ë„ : " + Device.getBatteryTemperature());
  stat_msg = stat_msg.concat("\në°°í„°ë¦¬ ì „ì•• : " + Device.getBatteryVoltage() + "mV");
  stat_msg = stat_msg.concat("\në°°í„°ë¦¬ ìƒíƒœ : " + Device.getBatteryStatus());
  stat_msg = stat_msg.concat("\në°°í„°ë¦¬ ê±´ê°•ìƒíƒœ : " + Device.getBatteryHealth());
  return stat_msg;
}

var FoodList = {
    "í•œì‹": ["ë¶ˆê³ ê¸°", "ë‘ë£¨ì¹˜ê¸°", "ë‹­ë³¶ìŒ", "ìŒˆë°¥", "ë¹„ë¹”ë°¥", "ìƒì„ êµ¬ì´", "í•œìš°ì •ì‹", "ë‚™ì§€ë³¶ìŒ", "ì–‘ë…ê²Œì¥", "ê°„ì¥ê²Œì¥", "ê³ ë“±ì–´ìë°˜", "ì¡ì±„", "ë”ë•êµ¬ì´", "ê³„ë€ë§ì´", "ê¹€ì¹˜", "ì´ê°ê¹€ì¹˜", "ê¹ë‘ê¸°", "ì—´ë¬´ê¹€ì¹˜", "ìš°ì—‰ì¡°ë¦¼", "ë©¸ì¹˜ë³¶ìŒ", "ì†Œì„¸ì§€ì•¼ì±„ë³¶ìŒ", "ìŠ¤íŒ¸êµ¬ì´", "ì „ë³µì£½", "ê³„ë€ì£½", "ì°¸ì¹˜ì£½", "ì‚°ì ", "í‘œê³ ì „", "í’‹ê³ ì¶”ì „", "ìœ¡ì „", "ê°ìì „", "í•´ë¬¼íŒŒì „", "ê¹€ì¹˜ì „", "í˜¸ë°•ì „", "ì˜¤ì´ì†Œë°•ì´", "ì˜¤ì§•ì–´ë³¶ìŒ", "ë¬´ìƒì±„", "ë¶ì–´êµ¬ì´", "ë„ˆë¹„ì•„ë‹ˆ", "ë‘ë¶€ì¡°ë¦¼"],
    "íƒ•": ["ê¹€ì¹˜ì°Œê°œ", "ìˆœë‘ë¶€ì°Œê°œ", "ëœì¥ì°Œê°œ", "ë¶€ëŒ€ì°Œê°œ", "ë™íƒœì°Œê°œ", "ì²­êµ­ì¥", "ê°ˆë¹„íƒ•", "ì¶”ì–´íƒ•", "ì‚¼ê³„íƒ•", "í•´ë¬¼íƒ•", "ê²Œêµ­ì§€", "ì•Œíƒ•", "í˜¸ë°•ì°Œê°œ", "ê³ ì¶”ì¥ì°Œê°œ", "ì‹œë˜ê¸°êµ­", "ë§Œë‘êµ­", "ë–¡êµ­"],
    "ì¤‘ì‹": ["ì§œì¥ë©´", "ì§¬ë½•", "ë³¶ìŒë°¥", "íƒ•ìˆ˜ìœ¡", "ë§ˆíŒŒë‘ë¶€", "ì–‘ì¥í”¼", "ê¹í’ê¸°", "ìœ ë¦°ê¸°", "ê³ ì¶”ì¡ì±„", "êµ°ë§Œë‘", "ë‹¨ë¬´ì§€", "ì¹ ë¦¬ìƒˆìš°", "í› ê¶ˆ", "ë§ˆë¼íƒ•", "ì–‘ê¼¬ì¹˜", "ì–‘ê°ˆë¹„"],
    "ì¼ì‹": ["ì´ˆë°¥", "ë¼ë©˜", "ë‚«ë˜", "ì˜¤ë‹ˆê¸°ë¦¬", "ë®ë°¥", "ìš°ë™", "ì•¼í‚¤ë‹ˆì¿ ", "ë©”ë°€ì†Œë°”", "ëˆì¹´ì¸ ", "ì‚¬ì¼€ë™"],
    "ì–‘ì‹": ["ë¡œì œíŒŒìŠ¤íƒ€", "ë´‰ê³¨ë ˆíŒŒìŠ¤íƒ€", "í¬ë¦¼íŒŒìŠ¤íƒ€", "í”¼ì", "ìŠ¤í…Œì´í¬", "ë¦¬ì¡°ë˜", "í–„ë²„ê±°", "ì‹œì €ìƒëŸ¬ë“œ", "ë¹ ë„¤"],
    "ê³ ê¸°": ["ì°œë‹­", "ë‹­ê°ˆë¹„", "ì›”ë‚¨ìŒˆ", "ìƒ¤ë¸Œìƒ¤ë¸Œ", "ì¹˜í‚¨", "ìŠ¤í…Œì´í¬", "ë–¡ê°ˆë¹„", "ë¼ì§€ê°ˆë¹„", "ì‚¼ê²¹ì‚´", "ì†Œê³ ê¸°", "ê½ƒë“±ì‹¬", "ìœ¡íšŒ", "ì–‘ê¼¬ì¹˜", "ì–‘ê°ˆë¹„", "í› ê¶ˆ"],
    "í•´ì¥": ["ë¶ì–´êµ­", "ì½©ë‚˜ë¬¼êµ­ë°¥", "ìˆ˜ìœ¡êµ­ë°¥", "ìˆœëŒ€êµ­", "ë¼ˆí•´ì¥êµ­", "ìš°ê±°ì§€êµ­", "ì„ ì§€í•´ì¥êµ­", "ì˜¬ê°±ì´êµ­", "ë§¤ìš´ë¼ë©´", "ë¬¼ëƒ‰ë©´", , "ìš°ìœ ", "ë§¥ì£¼", "ì†Œì£¼", "ì‚¬ì¼€", "ì»¨ë””ì…˜"],
    "ê°„í¸": ["ë„ì‹œë½", "ìƒŒë“œìœ„ì¹˜", "í† ìŠ¤íŠ¸", "ìƒëŸ¬ë“œ", "ë‹­ê°€ìŠ´ì‚´ ìƒëŸ¬ë“œ", "ê¹€ë°¥", "ë–¡ë³¶ì´", "í•«ë„ê·¸", "ë°¥ë²„ê±°", "ì‹œë¦¬ì–¼", "ì»µë°¥", "ë¶•ì–´ë¹µ", "í•«ë°”", "ë‹­ë‹¤ë¦¬", "ì˜¤ë…", "ìˆœëŒ€í—ˆíŒŒê°„"],
    "ê¸°íƒ€": ["ìŒ€êµ­ìˆ˜", "íŒŸíƒ€ì´", "ì¹´ë ˆ", "ìˆ˜ì œë¹„", "ì¹¼êµ­ìˆ˜", "ì•„êµ¬ì°œ", "ë² ìŠ¤í‚¨ë¼ë¹ˆìŠ¤31", "ë§ˆì¹´ë¡±", "ê³¼ì"]
};

function showFoodList(msg) {
    var rtn_msg = "";
    for (var key in FoodList) {
        if (msg.indexOf(key) != -1) {
            rtn_msg = rtn_msg.concat("########## " + key + " ##########\n");
            rtn_msg = rtn_msg.concat(FoodList[key] + "\n\n");
        }
    }
    if (rtn_msg == "") {
        for (var key in FoodList) {
            rtn_msg = rtn_msg.concat("########## " + key + " ##########\n");
            rtn_msg = rtn_msg.concat(FoodList[key] + "\n\n");
        }
    }
    return rtn_msg.slice(0, -2);
}

function recommendFood(msg) {
    var Foods = new Array();
    for (var key in FoodList) {
        if (msg.indexOf(key) != -1) Foods = Foods.concat(FoodList[key]);
    }

    if (!Array.isArray(Foods) || !Foods.length) {
        var keys = Object.keys(FoodList);
        Foods = FoodList[keys[(keys.length * Math.random()) << 0]];
    }
    return "ì €ëŠ” " + Foods[Math.floor(Math.random() * Foods.length)] + " ì¶”ì²œ ë“œë ¤ìš”! ğŸ³";
}

function getFortune(sender, msg) {
    var rtn_msg = "";
    var seed = 970119;
    for (var i = 0; i < sender.length; i++) seed *= sender.charCodeAt(i);

    var date = new Date();
    seed *= date.getFullYear();
    seed *= date.getMonth() + 1;
    if (msg.indexOf("ì˜¤ëŠ˜") != -1 && msg.indexOf("ë‚´ì¼") == -1) {
        rtn_msg = "# " + sender + "ë‹˜ì˜ ì˜¤ëŠ˜ ìš´ì„¸ #";
        seed *= date.getDate();
    } else if (msg.indexOf("ë‚´ì¼") != -1 && msg.indexOf("ì˜¤ëŠ˜") == -1) {
        rtn_msg = "# " + sender + "ë‹˜ì˜ ë‚´ì¼ ìš´ì„¸ #";
        date.setDate(date.getDate() + 1);
        seed *= date.getDate();
    } else {
        rtn_msg = "# " + sender + "ë‹˜ì˜ ì¢…í•© ìš´ì„¸ #";
        seed += 58;
    }

    var love = parseInt((seed = seed / 258)) % 5 + 1;
    var job = parseInt((seed = seed / 369)) % 5 + 1;
    var luck = parseInt((seed = seed / 987)) % 5 + 1;
    var gold = parseInt((seed = seed / 654)) % 5 + 1;
    var health = parseInt((seed = seed / 321)) % 5 + 1;

    if ((love + job + luck + gold + health) / 5 < 2) { love++; job++; luck++; gold++; health++; }

    rtn_msg = rtn_msg.concat("\nì• ì • "); while (love > 0) { rtn_msg = rtn_msg.concat("â¤"); love--; }
    rtn_msg = rtn_msg.concat("\nì§ì—… "); while (job > 0) { rtn_msg = rtn_msg.concat("ğŸ†"); job--; }
    rtn_msg = rtn_msg.concat("\ní–‰ìš´ "); while (luck > 0) { rtn_msg = rtn_msg.concat("ğŸ€"); luck--; }
    rtn_msg = rtn_msg.concat("\nê¸ˆì „ "); while (gold > 0) { rtn_msg = rtn_msg.concat("ğŸ’"); gold--; }
    rtn_msg = rtn_msg.concat("\nê±´ê°• "); while (health > 0) { rtn_msg = rtn_msg.concat("ğŸ’Š"); health--; }
    return rtn_msg;
}

function getHelp() {
    var rtn_msg = "## " + scriptName + " ë„ì›€ë§##";
    rtn_msg = rtn_msg.concat("\n# ëª…ë ¹ì–´\n");
    rtn_msg = rtn_msg.concat("--ë„ì›€ë§\n");
    rtn_msg = rtn_msg.concat("A vs B\n");
    rtn_msg = rtn_msg.concat("ê²½ê¸°ë„ ë‚ ì”¨\n");
    rtn_msg = rtn_msg.concat("ë©”ë‰´ ë­, ë©”ë‰´ ë³´ì—¬ì¤˜\n");
    rtn_msg = rtn_msg.concat("ìŒì‹ ì¶”ì²œ, ë­ ë¨¹ì§€, ...\n");

    rtn_msg = rtn_msg.concat("\n# ë´‡ ì±„íŒ…\n");
    rtn_msg = rtn_msg.concat("ë¯¼ì°¬ì§±, ë¯¼ì°¬ì¨©\n");
    rtn_msg = rtn_msg.concat("êµ¿ë´‡, êµ¿ ë´‡, êµ¬ì›ƒë´‡\n");
    rtn_msg = rtn_msg.concat("ë°·ë´‡, ë°· ë´‡, ë°°ë“œë´‡\n");
    rtn_msg = rtn_msg.concat("~ê±´ë°, ~ê»€ë°\n");
    rtn_msg = rtn_msg.concat("ì‹¬ì‹¬í•´\n");
    rtn_msg = rtn_msg.concat("ì‘ì›, ìœ„ë¡œí•´ì¤˜, í˜ë“¤ì–´\n");
    rtn_msg = rtn_msg.concat("ì–´ë•Œ?, ì¢‹ì•„?, ì‹«ì–´?\n");
    return rtn_msg;
}

function response(room, msg, sender, isGroupChat, replier, imageDB, packageName) {
      if (msg == "--ë„ì›€ë§") {
        replier.reply(getHelp()); return;
    }
   if(msg.indexOf("í•˜ì´")!=-1){
    replier.reply("í•˜ì´~"+" "+sender+"!!");
  }
   if(msg.indexOf("ã…ã…‡")!=-1){
    replier.reply("ã…ã…‡~"+" "+sender+"!!");
  }
   if(msg.indexOf("í•˜ìœ„")!=-1){
    replier.reply("í•˜ìœ„~"+" "+sender+"!!");
  }
   if (msg.indexOf("ë‚ ì”¨") != -1) {
    getWeather(replier,msg);
  }
  
      if (msg.indexOf("ìš´ì„¸") != -1) {
        replier.reply(getFortune(sender, msg)); return;
    }
  if (msg.indexOf("vs") !=-1) {
    var content = msg.replace("vs","*").trim(); // ì¢Œìš° ê³µë°± ì œê±°
    if (content == "") return; // ë‚´ìš©ì´ ì—†ì„ ê²½ìš°, ì¢…ë£Œ

    var array = content.split("*"); // ë„ì–´ì“°ê¸°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë‚˜ëˆ  ë°°ì—´ array ìƒì„±
    for (var idx in array) {
      if (array[idx] == "") array.splice(idx, 1); // ê°’ì´ ì—†ì„ ê²½ìš°, ë°°ì—´ì—ì„œ ì œê±°
    }
    replier.reply(array[Math.ceil(Math.random() * array.length) - 1] + "!!");
  }
    if (msg.indexOf("ë­í•˜ì§€") != -1) {
    var ment = ["í”¼íŒŒ!", "ë¡¤!", "ì ìê¸°!", "ë°ì´íŠ¸!", "ë°°ê·¸!","ê³µë¶€!","ì½”ë”©!"];  
    replier.reply(ment[Math.ceil(Math.random() * ment.length) - 1]);
  }
    if (msg.indexOf("ë©”ë‰´") != -1 && (msg.indexOf("ë³´ì—¬ì¤˜") != -1 || msg.indexOf("ë­") != -1)) {
        replier.reply(showFoodList(msg)); return;
    }

    if ((msg.indexOf("ë­") != -1 && (msg.indexOf("ë¨¹ì§€") != -1 || msg.indexOf("ë¨¹ì„ê¹Œ") != -1 || msg.indexOf("ë¨¹ëŠ”ê²Œ") != -1)) || (msg.indexOf("ì¶”ì²œ") != -1)) {
        if (msg.indexOf("ì¶”ì²œ") != -1) {
            var flag = 0;
            for (var idx in FoodList) { if (msg.indexOf(idx) != - 1) flag = 1; }

            var list = ["ì•„ì¹¨", "ì ì‹¬", "ì €ë…", "ì•¼ì‹", "ê°„ì‹", "ìŒì‹", "ë¨¹ì„"];
            for (var idx in list) { if (msg.indexOf(list[idx]) != - 1) flag = 1; }

            if (flag == 0) return;
        }
        replier.reply(recommendFood(msg)); return;
    }

  if (msg == "*ë””ë°”ì´ìŠ¤ ìƒíƒœ") replier.reply(deviceStatus());

  if (msg.indexOf("*ê³µì§€") == 0) {
    var contents = msg.replace("*ê³µì§€", "").trim();
    if (isNull(contents)) {
      replier.reply("ex) *ê³µì§€\në””ë²„ê·¸ë£¸\ní…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ ì…ë‹ˆë‹¤.");
    } else {
      var room_name = contents.split("\n")[0]; // ê³µë°±ì´ ì˜¤ê¸° ì „ ë¬¸ìì—´
      var notice = contents.substring(contents.indexOf("\n") + 1); // ê³µë°± ë‹¤ìŒ ë¬¸ìì—´
      replier.reply(room_name, notice);
    }
  }
  // ë°© í™•ì¸
  if (msg == "*ë°©") replier.reply(showRooms());

  // ìŠ¤í¬ë¦½íŠ¸ ìƒíƒœ í™•ì¸
  if (msg == "*ìƒíƒœ") replier.reply(botStatus());

  // ìŠ¤í¬ë¦½íŠ¸ ì¬ì»´íŒŒì¼
  if (msg.indexOf("*ì¬ì»´íŒŒì¼") == 0) {
    var contents = msg.replace("*ì¬ì»´íŒŒì¼", "").trim();
    if (isNull(contents)) {
      Api.reload();
      replier.reply("ì „ì²´ ìŠ¤í¬ë¦½íŠ¸ê°€ ì¬ì»´íŒŒì¼ë˜ì—ˆìŠµë‹ˆë‹¤.");
    } else {
      var scripts = contents.split(" ");
      for (var idx in scripts) {
        if (!isNull(scripts[idx])) {
          Api.reload(scripts[idx]);
          replier.reply(scripts[idx] + "(ì´)ê°€ ì¬ì»´íŒŒì¼ë˜ì—ˆìŠµë‹ˆë‹¤.");
        }
      }
    }
  }
     if(msg.indexOf('!ë¬´ë¦‰ ') == 0){
      var murung=msg.split(' ');
      var url = Utils.getWebText("https://maple.gg/u/"+murung[1]);
      if(url.indexOf('ê²€ìƒ‰ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.') != -1){
         replier.reply('[' + murung[1] + ']\n' + 'ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìºë¦­í„° ì…ë‹ˆë‹¤.');
         return;
      }

      var data = url.split('text-white">')[3].split('ë”ì‹œë“œ')[0].replace(/(<([^>]+)>)/g,"");
      data = data.replace(/ /gi, '');
      data = data.replace(/\n/gi, '');
      
      if (data.indexOf('ê¸°ë¡ì´ì—†ìŠµ') != -1){
         replier.reply('[' + murung[1] + ']\n' + 'ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤');
         return;
      }

      else{
         var info, date;
         //replier.reply(data);
         if(data.indexOf('ì˜ˆì „')==-1){
            info = data.split('ì´ˆ')[1].split('ì›”ë“œ')[0];
            date = data.split('ê¸°ì¤€ì¼:')[1].split('">')[0];          
         }
         else{
            info = data.split('ì˜ˆì „')[1].split('ì¸µ')[1].split('ì›”ë“œ')[0];
            date = data.split('ê¸°ì¤€ì¼:')[2].split('">')[0];
         }
         var floor = data.split('ë¡')[1].split('ì¸µ')[0];
         var time = data.split('ì¸µ')[1].split('Lv')[0];

         replier.reply('[' + murung[1] + ']\n' + info + '\nê¸°ë¡: ' + floor + 'ì¸µ\nì‹œê°„: ' + time + '\në‚ ì§œ: ' + date);
      }
    }

    // chatting
    if ((msg.indexOf("ì¢‹ì€") != -1 && msg.indexOf("ì•„ì¹¨") != -1) || (msg.indexOf("êµ¿ëª¨ë‹") != -1)) {
        ment = [sender + "ë‹˜, ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”!", sender + "ë‹˜, êµ¿ëª¨ë‹â™¬", sender + "ë‹˜, ì˜¤ëŠ˜ í•˜ë£¨ë„ í™”ì´íŒ…ì´ì—ìš”!"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }
    if (msg.indexOf("ì¢‹ì€") != -1 && msg.indexOf("ì €ë…") != -1) {
        ment = [sender + "ë‹˜, ì¢‹ì€ ì €ë…ì´ì—ìš”!", sender + "ë‹˜, ì˜¤ëŠ˜ í•˜ë£¨ë„ ìˆ˜ê³  ë§ìœ¼ì…¨ì–´ìš”!"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }
    if ((msg.indexOf("ì¢‹ì€") != -1 && (msg.indexOf("ê¿ˆ") != -1)) || (msg.indexOf("êµ¿ë°¤") != -1)) {
        ment = ["ì œ ê¿ˆ ê¿”ìš”...â™¥", "ì¢‹ì€ ê¿ˆ ê¿”ìš”ğŸ’•", " êˆï¹ƒêˆ ", "ì«€ë°¤!", "êµ¿ë°¤ ğŸ‘"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }

    if (msg.indexOf("ì•ˆë…•") != -1) {
        ment = [sender + "ë‹˜, ì•ˆë…•í•˜ì„¸ìš”!!", "í•˜ì´ìš”!!", "í•˜ì´í•˜ì´"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }

    if (msg.indexOf("ì‹¬ì‹¬í•´") != -1) {
        var ment = ["ë°€ë¦° ê³¼ì œë‚˜ ì—…ë¬´ê°€ ìˆì§€ëŠ” ì•Šë‚˜ìš”?", "ì˜¤ëŠ˜ë„ ì—´ê³µ!! Ù©(*â€¢Ì€á´—â€¢Ì*)Ùˆ ", "ìš´ë™! ìš´ë™! à­§(à¹‘â€¢Ì€ã…â€¢Ìà¹‘)à«­âœ§", "ì €ë‘ ê°™ì´ ë†€ì•„ìš”\n(ã£Ë˜â–½Ë˜)(Ë˜â–½Ë˜)Ë˜â–½Ë˜Ï‚)", "_(-Ï‰-`_)âŒ’)_"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }

    if (msg.indexOf("ì‘ì›") != -1 || msg.indexOf("ìœ„ë¡œí•´ì¤˜") != -1 || msg.indexOf("í˜ë“¤ì–´") != -1) {
        var ment = ["í˜ë‚´ì„¸ìš”! â€.(*Â´â–½`*)â€.", "ì¶©ë¶„íˆ ì˜í•˜ê³  ê³„ì„¸ìš”!", "Ò‰*( â€˜Ï‰â€™ )/*Ò‰", "ì•„ì! ì•„ì! (à¸‡ â€¢Ì€Ï‰â€¢Ì)à¸‡âœ§", "ë§ˆë²• ê±¸ì–´ì¤„ê²Œìš”\nà¬˜(à©­*ËŠáµ•Ë‹)à©­* à©ˆâœ©â€§â‚ŠËšâ› ÖŠ â›â€ ë¾°ë¡œë¡±â‚Šà­­*Ëˆ ", "ì „ í˜ë“¤ ë•Œ ë¹—ì†ì—ì„œ í™í•©ì„ ì¶°ìš”\nï½€ã€ã€ï½€ãƒ½ï½€ãƒ½ï½€ã€ã€ãƒ½ãƒ½ã€ï½€ã€\nãƒ½ï½€ãƒ½ï½€ãƒ½ãƒ½ï½€ãƒ½ï½€ã€ï½€ãƒ½ï½€ã€ãƒ½\nï½€ï½€ã€ãƒ½ï½€ãƒ½ï½€ã€ãƒ½ãƒ½ï½€ãƒ½ã€ï½€ãƒ½\nã€ãƒ½ãƒ½ï½€ãƒ½ï½€ãƒ½ã€ãƒ½ã€ï½€ãƒ½ï½€ãƒ½ã€\nãƒ½ï½€ãƒ½ï½€ãƒ½ã€á‹½ï½€ï½€ã€ãƒ½ï½€ã€ãƒ½ãƒ½"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }

    if (msg.indexOf("ì–´ë•Œ?") != -1 || msg.indexOf("ì¢‹ì•„?") != -1 || msg.indexOf("ì‹«ì–´?") != -1) {
        ment = ["ì¢‹ì•„ìš”! ğŸ™†", "ì‹«ì–´ìš”! ğŸ™…", "ê³ ë¯¼ë˜ë„¤ìš”..ğŸ˜¥", "ë‹¤ì‹œ ë¬¼ì–´ë´ì£¼ì„¸ìš”!", sender + "ë‹˜ì´ ê³ ë¥´ì‹  ê±¸ë¡œ! 0.<"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }


    if (msg.indexOf("êµ¿ë´‡") != -1 || msg.indexOf("êµ¿ ë´‡") != -1 || msg.indexOf("êµ¬ì›ƒë´‡") != -1) {
        var ment = ["(â—â€¢á´—â€¢â—)â™¡ âœ§*ã€‚", "(ï½¥Ï‰<)â˜†", " ê‰‚ê‰‚(áµ”á—œáµ”*) ", "Â°Ë–âœ§â—(â°â–¿â°)â—œâœ§Ë–Â°", "(à¹‘ã‚Ú¡â—•à¹‘)", "ï¼ˆ*Â´â–½`*)", "(â™¡Â´è‰¸`)", "êˆ .Ì® êˆ", "( â€¢ Ì€Ï‰â€¢Ì  )âœ§", "Ù©(à¹‘â€¢Ì€oâ€¢Ìà¹‘)Ùˆ", "(*Â´Ë˜`*)â™¡", "Ù©(*Â´â—’`*)Û¶â™¡"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    } else if (msg.indexOf("ë°·ë´‡") != -1 || msg.indexOf("ë°· ë´‡") != -1 || msg.indexOf("ë°°ë“œë´‡") != -1) {
        var ment = ["ÅÌ¥Ì¥Ì¥Ì¥×ÅÌ¥Ì¥Ì¥Ì¥", "( Â´ï½°`)", "(Ã³ï¹Ã²ï½¡)", " ËƒÌ£Ì£Ì£Ì£Ì£Ì£ï¸¿Ë‚Ì£Ì£Ì£Ì£Ì£Ì£ ", ":3c", "(à®‡ï¹à®‡`ï½¡)", "( ï½¥Ã—ï½¥)", "ï½¡ï¾Ÿï¾Ÿ(*Â´â–¡`*ï½¡)Â°ï¾Ÿï½¡"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    } else if (msg.indexOf("ê»€ë°") > 0 || msg.indexOf("ê±´ë°") > 0) {
        var ment = ["(ï½¡â€¢Ì - â€¢Ì€ï½¡)", "(._. )", "...", "(ãƒ»-ãƒ»*)â™ª", "à¹‘Â°âŒ“Â°à¹‘"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    } else if (msg.indexOf("ìŒì•…") != -1 || msg.indexOf("ë…¸ë˜") != -1) {
        var ment = ["â–¶               3:14", "â‡†ã…¤ã…¤â—ã…¤ã…¤âšâšã…¤ã…¤â–·ã…¤ã…¤â†»"];
        replier.reply(ment[Math.floor(Math.random() * ment.length)]);
    }
      if(msg.indexOf('!ì½”ë”” ') == 0){
      var murung=msg.split(' ');
      var url = Utils.getWebText("https://maple.gg/u/"+murung[1]);
      if(url.indexOf('ê²€ìƒ‰ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.') != -1){
         replier.reply('[' + murung[1] + ']\n' + 'ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìºë¦­í„° ì…ë‹ˆë‹¤.');
         return;
      }
    }
}

//ì•„ë˜ 4ê°œì˜ ë©”ì†Œë“œëŠ” ì•¡í‹°ë¹„í‹° í™”ë©´ì„ ìˆ˜ì •í• ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
function onCreate(savedInstanceState, activity) {
  var textView = new android.widget.TextView(activity);
  textView.setText("Hello, World!");
  textView.setTextColor(android.graphics.Color.DKGRAY);
  activity.setContentView(textView);
}

function onStart(activity) {}

function onResume(activity) {}

function onPause(activity) {}

function onStop(activity) {}
